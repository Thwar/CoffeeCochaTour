@page  "{name?}"
@model CochaCoffeeTour.Pages.CoffeeShops.DetailsModel

@{
    ViewData["Title"] = "Details";
}





<style>
    #map {
        display: block;
        width: 100%;
        height: 200px;
    }

    #map {
        background: #58B;
    }

    #infowindow-content {
        display: none;
    }

    #map #infowindow-content {
        display: inline;
    }

    #myCarousel {
        margin: 0 auto;
    }
</style>

<script>

    var map, popup, Popup;

    $(document).ready(function () {

        //Create Google Maps PopUp
        definePopupClass();

        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -17.376499, lng: -66.1583852},
            zoom: 17,
            gestureHandling: 'greedy'
        });

        var infoWindow = new google.maps.InfoWindow();
        var infowindowContent = document.getElementById('infowindow-content');
        infoWindow.setContent(infowindowContent);
        var service = new google.maps.places.PlacesService(map);

            service.getDetails({
                placeId: "@Model.CoffeeShop.GooglePlaceId"
            }, function(place, status) {
                if (status === google.maps.places.PlacesServiceStatus.OK) {


                    map.setCenter(place.geometry.location);

                    //Create Marker
                    var marker = new google.maps.Marker({
                        map: map,
                        position: place.geometry.location
                    });
                    //END

                    infowindowContent.children['place-name'].textContent = place.name;
                    infowindowContent.children['place-address'].textContent =   place.formatted_address;
                     var a = document.getElementById("mapUrl");
                    a.setAttribute("href", " https://www.google.com/maps/place/?q=place_id:@Model.CoffeeShop.GooglePlaceId");
                    a.setAttribute("target", "_blank");

                    infoWindow.open(map, marker);

                    //cREATE POPUP
                    //var lat = place.geometry.location.lat();
                    //var lng = place.geometry.location.lng();

                    //var mapPopup = document.createElement("P");       // Create a <p> node
                    //var t = document.createTextNode(place.name);      // Create a text node
                    //mapPopup.appendChild(t);

                    //popup = new Popup(
                    //    new google.maps.LatLng(lat, lng), mapPopup);
                    //popup.setMap(map);

                }
            });
    });

</script>




<div class="row">
    <div class="col-sm-12">

        <div id="map"></div>
        <div id="infowindow-content">
            <strong id="place-name" class="title"></strong>
            <br>
            <span id="place-address"></span>

            <hr>
            <a id="mapUrl">Ver en Google Maps</a>
        </div>
    </div>
</div>


<div class="row details">

    <div class="col-sm-12">

        <div style="display: inline-flex">

            <h2>@Model.CoffeeShop.Name</h2>


        </div>


        <hr />
    </div>


    <div class="col-sm-6 ">

        <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000" style="width: 80%">
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                @*<li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>*@
            </ol>
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <a data-fancybox="gallery" href="@Model.CoffeeShop.Image1Url">
                        <img src="@Model.CoffeeShop.Image1Url" alt="cocha" class="img-responsive" />
                    </a>
                </div>

                @if (@Model.CoffeeShop.Image2Url != null)
                {
                    <div class="item ">
                        <a data-fancybox="gallery" href="@Model.CoffeeShop.Image2Url">
                            <img src="@Model.CoffeeShop.Image2Url" alt="cocha" class="img-responsive"/>
                        </a>
                    </div>
                }
                
            @if (@Model.CoffeeShop.Image3Url != null)
            {
                <div class="item ">
                    <a data-fancybox="gallery" href="@Model.CoffeeShop.Image3Url">
                        <img src="@Model.CoffeeShop.Image3Url" alt="cocha" class="img-responsive"/>
                    </a>
                </div>
            }

                @*<div class="item">
                        <img src="~/images/banner2.svg" alt="Visual Studio" class="img-responsive" />
                        <div class="carousel-caption" role="option">
                            <p>
                                There are powerful new features in Visual Studio for building modern web apps.
                                <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525030&clcid=0x409">
                                    Learn More
                                </a>
                            </p>
                        </div>
                    </div>
                    <div class="item">
                        <img src="~/images/banner3.svg" alt="Package Management" class="img-responsive" />
                        <div class="carousel-caption" role="option">
                            <p>
                                Bring in libraries from NuGet and npm, and automate tasks using Grunt or Gulp.
                                <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525029&clcid=0x409">
                                    Learn More
                                </a>
                            </p>
                        </div>
                    </div>*@
            </div>
            <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>



    </div>

    <div class="col-sm-6">  
        
            <div class="col-xs-6" style="text-align: center">
                <label>Speed Internet</label>
                <br />@Model.CoffeeShop.InternetSpeed
            </div>           
        
            <div class="col-xs-6" style="text-align: center">
                <label>Calificacion</label>
                <p style="text-align: center">@Model.CoffeeShop.rating/5</p>
            </div>

        <p>
                <label>Descripcion</label><br/>
                @Model.CoffeeShop.Description
            </p>

            <div class="col-xs-6">

                <p style="white-space: pre-line">
                    <label>Pros</label>
                    @Model.CoffeeShop.prosText
                </p>
            </div>
            <div class="col-xs-6">
                <p style="white-space: pre-line">
                    <label>Contras</label>
                    @Model.CoffeeShop.consText
                </p>
            </div>





        </div>

</div>


<div id="detail-links">
    @if (User.Identity.IsAuthenticated)
    {
        <a asp-page="./Edit" asp-route-id="@Model.CoffeeShop.ID">Edit</a> @:|
    }
    <br />

    <a asp-page="/Index">
        <span class="glyphicon glyphicon-circle-arrow-left"></span> Volver atras
    </a>

</div>
